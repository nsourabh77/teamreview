@model TeamReview.Web.ViewModels.ResultViewModel

@{
    ViewBag.Title = "Results";
}

<h1>Results for Review "@Model.ReviewName"</h1>

<p class="info">todo Anton: If no peers show: "You have not invited any peers to complete this review -> invite some peers(link to edit review). If peers havent rated yet, then: "peers havent completed their reviews yet."</p>
<h2>My Results</h2>
<div id="yourResults">
    <p class="info block-top">Overview of how your peers rated you</p>

    @foreach (var category in Model.CategoriesWithMyResults)
    {
        var categoryId = "catMyResults" + category.CategoryName;
        var myRatingValue = "rv" + category.MyRating;
        <div id="@categoryId">            
            
            <table class="table1">
                <colgroup>
                    <col width="36%" />                    
                    <col width="64%" />
                </colgroup>
                <tr>
                    <th>
                        @category.CategoryName
                        <i class="rs21"></i>
                        <div class="popup"><blockquote class="rt32">@category.CategoryDescription</blockquote></div>
                    </th>                    
                    <td>@category.PeerRating</td>
                </tr>
                <tr>
                    <td class="rt20">My Rating</td>
                    <td><span class="@myRatingValue">@category.MyRating</span></td>
                </tr>
            </table>
        </div>
    }
    <p class="info">If no peers show: "You have not invited any peers to complete this review -> invite some peers(link to edit review). If peers havent rated yet, then: "peers havent completed their reviews yet."</p>
    <p>Stacked rating by peers = @Model.PeerStackedRating</p>
    <p>Stacked rating by yourself = @Model.MyStackedRating</p>
</div>

<h2>Everyone's Results:</h2>
<p class="info">If no peers show: "You have not invited any peers to complete this review -> invite some peers(link to edit review). If peers havent rated yet, then: "peers havent completed their reviews yet."</p>
<div id="everyonesResults">
    @foreach (var category in Model.CategoriesWithPeersWithResults)
    { 
        var categoryId = "catPeerResults" + category.CategoryName;
        <div id="@categoryId">
            <p>@category.CategoryName : @category.CategoryDescription</p>
            @foreach (var peer in category.PeersWithResult)
            { 
                <p>Name = @peer.PeerName : peer rating = @peer.PeerRating</p>
            }
        </div>
    }
</div>
Stacked results:
<div id="everyonesStackedResults">
    @foreach (var peer in Model.PeersWithStackedRatings)
    { 
        <p>Name = @peer.PeerName : peer rating = @peer.PeerStackedRating</p>
    }
</div>

<p>
    @Html.ActionLink("Back to My Dashboard", "Index")
</p>
    
<div id="chart1"></div>

<script>
    $(document).ready(function () {
        var s1 = [5, 6, 3, 9];
        var s2 = [2, 6, 8, 7];        
        // Can specify a custom tick Array.
        // Ticks should match up one for each y value (category) in the series.
        var ticks = ['Performance', 'Teamwork', 'Coolness', 'Stylepoints'];

        var plot1 = $.jqplot('chart1', [s1, s2], {
            // The "seriesDefaults" option is an options object that will
            // be applied to all series in the chart.
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: { fillToZero: true }
            },
            // Custom labels for the series are specified with the "label"
            // option on the series option.  Here a series option object
            // is specified for each series.
            series: [
            { label: 'My Rating' },
            { label: 'Peer Rating' },
            
        ],
            // Show the legend and put it outside the grid, but inside the
            // plot container, shrinking the grid to accomodate the legend.
            // A value of "outside" would not shrink the grid and allow
            // the legend to overflow the container.
            legend: {
                show: true,
                placement: 'outsideGrid'
            },
            seriesColors: [ "#62C462", "#007ACC"],
            grid: {
                drawGridLines: true,        // wether to draw lines across the grid or not.
                gridLineColor: '#dddddd',    // *Color of the grid lines.
                background: '#eeeeee',      // CSS color spec for background color of grid.
                borderColor: '#999999',     // CSS color spec for border around grid.
                borderWidth: 2.0,           // pixel width of border around grid.
                shadow: false,               // draw a shadow for grid.
                shadowAngle: 0,            // angle of the shadow.  Clockwise from x axis.
                shadowOffset: 0,          // offset from the line of the shadow.
                shadowWidth: 0,             // width of the stroke for the shadow.
                shadowDepth: 0,             // Number of strokes to make when drawing shadow.
                                            // Each stroke offset by shadowOffset from the last.
                shadowAlpha: 0.07,           // Opacity of the shadow
                renderer: $.jqplot.CanvasGridRenderer,  // renderer to use to draw the grid.
                rendererOptions: {}         // options to pass to the renderer.  Note, the default
                                            // CanvasGridRenderer takes no additional options.
            },
            axes: {
                // Use a category axis on the x axis and use our custom ticks.
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: ticks
                },
                // Pad the y axis just a little so bars can get close to, but
                // not touch, the grid boundaries.  1.2 is the default padding.
                yaxis: {
                    pad: 1.05,                    
                }
            }
        });
    });
</script>
